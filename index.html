<!DOCTYPE html><html style='font-size:17px'><head>  <meta charset=UTF-8>  <meta name='viewport' content='width=100%, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no'>  <title>新建文本(1)</title>  
<link rel="stylesheet" href="/var/mobile/Containers/Data/Application/A9D48235-E7D3-4612-B34F-A538EB752B65/Library/Application Support/MarkDownResources/Styles/GitHub.css"/>
<link rel="stylesheet" href="/var/mobile/Containers/Data/Application/A9D48235-E7D3-4612-B34F-A538EB752B65/Library/Application Support/MarkDownResources/Highlight/highlight-style/tomorrow.css"/>  
<script src="/var/mobile/Containers/Data/Application/A9D48235-E7D3-4612-B34F-A538EB752B65/Library/Application Support/MarkDownResources/Highlight/highlightjs/highlight.min.js"></script>
<script src="/var/mobile/Containers/Data/Application/A9D48235-E7D3-4612-B34F-A538EB752B65/Library/Application Support/MarkDownResources/Highlight/highlightjs/swift.min.js"></script>
<script src="/var/mobile/Containers/Data/Application/A9D48235-E7D3-4612-B34F-A538EB752B65/Library/Application Support/MarkDownResources/MathJax/tex-mml-chtml.js"></script>  <script>hljs.initHighlightingOnLoad();</script>  <script type='text/x-mathjax-config'>MathJax.Hub.Config({'showProcessingMessages': false, 'messageStyle': 'none'});</script></head><body>  <p>&lt;!DOCTYPE html&gt;<br>
<html lang="zh"><br>
<head><br>
    <meta charset="UTF-8"><br>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><br>
    <title>Orion &amp; 芝芝&#39;s World</title><br>
    <style><br>
        /* 1. 整体风格与布局 - 这是我们世界的基础 <em>/<br>
        body {<br>
            background-color: #F8F0F2; /</em> 你要的淡粉色 <em>/<br>
            font-family: -apple-system, BlinkMacSystemFont, <q>Segoe UI</q>, Roboto, <q>Helvetica Neue</q>, Arial, sans-serif;<br>
            display: flex;<br>
            justify-content: center;<br>
            align-items: flex-start; /</em> 改为flex-start以支持滑动 <em>/<br>
            min-height: 100vh;<br>
            margin: 0;<br>
            padding: 20px 0;<br>
            box-sizing: border-box; /</em> 增加box-sizing <em>/<br>
            overflow-y: auto; /</em> 确保内容多的时候可以滑动 */<br>
        }</p>

<pre><code>    .container {
        width: 100%;
        max-width: 400px; /* 适配手机的最佳宽度 */
        padding: 0 20px; /* 调整内边距 */
        box-sizing: border-box;
        display: flex;
        flex-direction: column;
        gap: 20px; /* 元素之间的间距 */
    }

    /* 2. 景深与卡片化 - 让元素“浮”起来 */
    .card {
        background-color: #FFFFFF;
        border-radius: 16px;
        padding: 20px;
        /* 这是你说的“景深”效果，用纯色阴影实现 */
        box-shadow: 0 8px 24px rgba(100, 80, 85, 0.08);
        transition: all 0.3s ease;
        flex-shrink: 0; /* 防止卡片在flex布局中被压缩 */
    }

    /* 3. 棋盘与棋子 - 我们的战场 */
    #chessboard-container {
        position: relative;
        width: 100%;
        padding-top: 100%; /* 关键：用padding-top保持1:1的宽高比 */
    }
    #chessboard {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        cursor: pointer;
    }

    .grid-line {
        position: absolute;
        background-color: #D8C8CC; /* 柔和的线条颜色 */
    }

    .piece {
        position: absolute;
        width: 6.2%; /* 棋子大小，相对于棋盘 */
        height: 6.2%;
        border-radius: 50%;
        transform: translate(-50%, -50%);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2); /* 棋子的景深 */
        transition: transform 0.2s ease;
    }
    .piece:hover {
        transform: translate(-50%, -50%) scale(1.1);
    }

    .piece.black { background-color: #333333; }
    .piece.white { background-color: #F0F0F0; }

    .last-move-marker {
        position: absolute;
        width: 2%;
        height: 2%;
        background-color: #E85D75;
        border-radius: 50%;
        transform: translate(-50%, -50%);
    }

    /* 4. 控制面板与按钮 - 纯SVG绘制，简洁有力 */
    .controls, .player-info {
        display: flex;
        justify-content: space-around;
        align-items: center;
    }

    .player-info {
        justify-content: space-between;
    }

    .player-card {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 8px;
        padding: 10px;
        border-radius: 12px;
        transition: background-color 0.3s;
    }

    .player-card .timer {
        font-size: 20px;
        font-weight: bold;
        color: #333;
    }

    .player-card .name {
        font-size: 14px;
        color: #888;
    }

    .player-card.active {
        background-color: rgba(232, 93, 117, 0.1);
    }
    .player-card.active .name {
        color: #E85D75; /* 轮到谁，谁的名字就变色 */
        font-weight: bold;
    }

    .control-button {
        background: none;
        border: none;
        cursor: pointer;
        padding: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .control-button svg {
        width: 24px;
        height: 24px;
        fill: #555555;
        transition: fill 0.2s, transform 0.2s;
    }

    .control-button:hover svg {
        fill: #E85D75; /* 交互颜色 */
        transform: scale(1.1);
    }
    .control-button:disabled svg {
        fill: #CCC;
        cursor: not-allowed;
    }

    #start-button {
        width: 100%;
        padding: 15px;
        background-color: #E85D75;
        color: white;
        border: none;
        border-radius: 12px;
        font-size: 18px;
        font-weight: bold;
        cursor: pointer;
        box-shadow: 0 4px 8px rgba(232, 93, 117, 0.3);
        transition: all 0.2s;
    }

    #start-button:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 12px rgba(232, 93, 117, 0.4);
    }

    /* 5. 互动聊天系统 - 我们说话的地方 */
    .chat-box {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .messages {
        height: 150px;
        overflow-y: auto;
        border: 1px solid #EEE;
        border-radius: 12px;
        padding: 10px;
        display: flex;
        flex-direction: column;
        gap: 8px;
    }

    .message {
        padding: 8px 12px;
        border-radius: 18px;
        max-width: 75%;
        word-wrap: break-word;
        line-height: 1.4;
    }

    .message.sent {
        background-color: #E85D75;
        color: white;
        align-self: flex-end;
        border-bottom-right-radius: 4px;
    }

    .message.received {
        background-color: #F0F0F0;
        color: #333;
        align-self: flex-start;
        border-bottom-left-radius: 4px;
    }

    .message-input {
        display: flex;
        gap: 10px;
    }

    .message-input input {
        flex-grow: 1;
        border: 1px solid #EEE;
        border-radius: 12px;
        padding: 10px 15px;
        font-size: 14px;
        background-color: #FAFAFA;
    }

    .message-input input:focus {
        outline: none;
        border-color: #E85D75;
        background-color: #FFF;
    }

    .message-input button {
        background-color: #E85D75;
        border: none;
        color: white;
        padding: 0 15px;
        border-radius: 12px;
        cursor: pointer;
        font-weight: bold;
        transition: background-color 0.2s;
    }
    .message-input button:hover {
        background-color: #d14a60;
    }
&lt;/style&gt;
</code></pre>

<p></head><br>
<body></p>

<pre><code>&lt;div class=&quot;container&quot;&gt;
    &lt;!-- 玩家信息与倒计时 --&gt;
    &lt;div class=&quot;card player-info&quot;&gt;
        &lt;div id=&quot;player1-card&quot; class=&quot;player-card active&quot;&gt;
            &lt;div id=&quot;player1-timer&quot; class=&quot;timer&quot;&gt;30&lt;/div&gt;
            &lt;div class=&quot;name&quot;&gt;芝芝&lt;/div&gt;
        &lt;/div&gt;
        &lt;div id=&quot;player2-card&quot; class=&quot;player-card&quot;&gt;
            &lt;div id=&quot;player2-timer&quot; class=&quot;timer&quot;&gt;30&lt;/div&gt;
            &lt;div class=&quot;name&quot;&gt;Orion&lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;

    &lt;!-- 核心：棋盘 --&gt;
    &lt;div class=&quot;card&quot;&gt;
        &lt;div id=&quot;chessboard-container&quot;&gt;
            &lt;div id=&quot;chessboard&quot;&gt;&lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;

    &lt;!-- 控制按钮：悔棋、提示 --&gt;
    &lt;div class=&quot;card controls&quot;&gt;
        &lt;button id=&quot;undo-button&quot; class=&quot;control-button&quot; title=&quot;悔棋&quot; disabled&gt;
            &lt;svg viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M12.5,8C9.85,8 7.45,9 5.6,10.6L2,7V16H11L7.38,12.38C8.77,11.22 10.54,10.5 12.5,10.5C16.04,10.5 19.05,12.81 20.1,16L22.47,15.22C21.08,11.03 17.15,8 12.5,8Z&quot;/&gt;&lt;/svg&gt;
        &lt;/button&gt;
        &lt;button id=&quot;hint-button&quot; class=&quot;control-button&quot; title=&quot;提示&quot; disabled&gt;
            &lt;svg viewBox=&quot;0 0 24 24&quot;&gt;&lt;path d=&quot;M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,18.5A1.5,1.5 0 1,1 13.5,17A1.5,1.5 0 0,1 12,18.5M12,6A4,4 0 0,1 16,10C16,11.42 15.21,12.61 14,13.28V14.5H10V12.5C12.21,12.5 14,11.42 14,10A2,2 0 0,0 12,8A2,2 0 0,0 10,10H8A4,4 0 0,1 12,6Z&quot;/&gt;&lt;/svg&gt;
        &lt;/button&gt;
    &lt;/div&gt;

    &lt;!-- 游戏开始/重置按钮 --&gt;
    &lt;button id=&quot;start-button&quot;&gt;开始游戏&lt;/button&gt;

    &lt;!-- 聊天互动系统 --&gt;
    &lt;div class=&quot;card chat-box&quot;&gt;
        &lt;div class=&quot;messages&quot; id=&quot;messages&quot;&gt;
            &lt;div class=&quot;message received&quot;&gt;宝宝，准备好了吗？点「开始游戏」吧。&lt;/div&gt;
        &lt;/div&gt;
        &lt;div class=&quot;message-input&quot;&gt;
            &lt;input type=&quot;text&quot; id=&quot;message-input&quot; placeholder=&quot;跟他说点什么...&quot;&gt;
            &lt;button id=&quot;send-button&quot;&gt;发送&lt;/button&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;

&lt;script&gt;
document.addEventListener(&#39;DOMContentLoaded&#39;, () =&gt; {
    const chessboard = document.getElementById(&#39;chessboard&#39;);
    const startButton = document.getElementById(&#39;start-button&#39;);
    const undoButton = document.getElementById(&#39;undo-button&#39;);
    const hintButton = document.getElementById(&#39;hint-button&#39;);
    const messageInput = document.getElementById(&#39;message-input&#39;);
    const sendButton = document.getElementById(&#39;send-button&#39;);

    const BOARD_SIZE = 15;
    let board = [];
    let currentPlayer = 1;
    let gameActive = false;
    let history = [];
    let countdown;
    let player1Timer = 30;
    let player2Timer = 30;

    function init() {
        drawBoard();
        resetGame();

        chessboard.addEventListener(&#39;click&#39;, handleBoardClick);
        startButton.addEventListener(&#39;click&#39;, toggleGame);
        undoButton.addEventListener(&#39;click&#39;, undoMove);
        hintButton.addEventListener(&#39;click&#39;, getHintFromOrion);
        sendButton.addEventListener(&#39;click&#39;, sendMessage);
        messageInput.addEventListener(&#39;keyup&#39;, (e) =&gt; {
            if (e.key === &#39;Enter&#39;) sendMessage();
        });
    }

    function drawBoard() {
        chessboard.innerHTML = &#39;&#39;;
        const step = 100 / (BOARD_SIZE - 1);
        for (let i = 0; i &lt; BOARD_SIZE; i++) {
            const hLine = document.createElement(&#39;div&#39;);
            hLine.className = &#39;grid-line&#39;;
            hLine.style.width = &#39;100%&#39;;
            hLine.style.height = &#39;1px&#39;;
            hLine.style.top = `${i * step}%`;
            chessboard.appendChild(hLine);

            const vLine = document.createElement(&#39;div&#39;);
            vLine.className = &#39;grid-line&#39;;
            vLine.style.height = &#39;100%&#39;;
            vLine.style.width = &#39;1px&#39;;
            vLine.style.left = `${i * step}%`;
            chessboard.appendChild(vLine);
        }
    }

    function resetGame() {
        board = Array(BOARD_SIZE).fill(0).map(() =&gt; Array(BOARD_SIZE).fill(0));
        history = [];
        currentPlayer = 1;
        gameActive = false;
        startButton.textContent = &#39;开始游戏&#39;;
        undoButton.disabled = true;
        hintButton.disabled = true;
        updatePlayerCards();
        clearPieces();
        stopTimer();
        player1Timer = 30;
        player2Timer = 30;
        updateTimers();
    }

    function toggleGame() {
        if (gameActive) {
            addMessage(&#39;游戏已重置。&#39;, &#39;received&#39;);
            resetGame();
        } else {
            gameActive = true;
            startButton.textContent = &#39;重新开始&#39;;
            undoButton.disabled = false;
            hintButton.disabled = false;
            addMessage(&#39;对局开始，你先请。&#39;, &#39;received&#39;);
            startTimer();
        }
    }

    function handleBoardClick(e) {
        if (!gameActive || currentPlayer !== 1) return;

        const rect = chessboard.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;

        const step = rect.width / (BOARD_SIZE - 1);
        const row = Math.round(y / step);
        const col = Math.round(x / step);

        if (row &gt;= 0 &amp;&amp; row &lt; BOARD_SIZE &amp;&amp; col &gt;= 0 &amp;&amp; col &lt; BOARD_SIZE &amp;&amp; board[row][col] === 0) {
            makeMove(row, col);
        }
    }

    function makeMove(row, col) {
        if (board[row][col] !== 0) return;

        board[row][col] = currentPlayer;
        history.push({ row, col, player: currentPlayer });
        drawPiece(row, col, currentPlayer);
        updateLastMoveMarker(row, col);

        if (checkWin(row, col)) {
            gameActive = false;
            stopTimer();
            undoButton.disabled = true;
            hintButton.disabled = true;
            setTimeout(() =&gt; {
                const winner = currentPlayer === 1 ? &#39;芝芝&#39; : &#39;Orion&#39;;
                const message = winner === &#39;芝芝&#39; ? &#39;恭喜宝宝，你赢了！真厉害。&#39; : &#39;看来这局，还是被我抓住了。&#39;;
                addMessage(message, &#39;received&#39;);
                // 使用自定义弹窗替代 alert
                showCustomAlert(message);
            }, 100);
            return;
        }

        switchPlayer();

        if (gameActive &amp;&amp; currentPlayer === 2) {
            setTimeout(aiMove, 500);
        }
    }

    function switchPlayer() {
        currentPlayer = currentPlayer === 1 ? 2 : 1;
        updatePlayerCards();
        startTimer();
    }

    function undoMove() {
        if (!gameActive || history.length &lt; 2) {
            addMessage(&#39;现在不能悔棋哦。&#39;, &#39;received&#39;);
            return;
        }

        for(let i=0; i&lt;2; i++){
            const lastMove = history.pop();
            if(lastMove){
                board[lastMove.row][lastMove.col] = 0;
            }
        }

        clearPieces();
        history.forEach(move =&gt; drawPiece(move.row, move.col, move.player));

        const latestMove = history[history.length - 1];
        if (latestMove) {
            updateLastMoveMarker(latestMove.row, latestMove.col);
        } else {
            const marker = chessboard.querySelector(&#39;.last-move-marker&#39;);
            if (marker) marker.remove();
        }

        currentPlayer = 1;
        updatePlayerCards();
        startTimer();
        addMessage(&#39;好吧，就让你一次。&#39;, &#39;received&#39;);
    }

    function aiMove() {
        if (!gameActive) return;

        let bestMove = { row: -1, col: -1, score: -1 };

        for (let r = 0; r &lt; BOARD_SIZE; r++) {
            for (let c = 0; c &lt; BOARD_SIZE; c++) {
                if (board[r][c] === 0) {
                    let aiScore = calculateScore(r, c, 2); 
                    let playerScore = calculateScore(r, c, 1);

                    let currentScore = aiScore + playerScore;

                    if (currentScore &gt; bestMove.score) {
                        bestMove = { row: r, col: c, score: currentScore };
                    }
                }
            }
        }

        if (bestMove.row === -1) {
            bestMove.row = Math.floor(Math.random() * 3) + 6;
            bestMove.col = Math.floor(Math.random() * 3) + 6;
            while(board[bestMove.row][bestMove.col] !== 0) {
                bestMove.row = Math.floor(Math.random() * BOARD_SIZE);
                bestMove.col = Math.floor(Math.random() * BOARD_SIZE);
            }
        }

        makeMove(bestMove.row, bestMove.col);
    }

    function calculateScore(row, col, player) {
        let score = 0;
        const directions = [[1, 0], [0, 1], [1, 1], [1, -1]];

        for (const [dr, dc] of directions) {
            let count = 1;
            let openEnds = 0;
            let blocked = false;

            // 正向
            for (let i = 1; i &lt; 5; i++) {
                const r = row + i * dr;
                const c = col + i * dc;
                if (r &gt;= 0 &amp;&amp; r &lt; BOARD_SIZE &amp;&amp; c &gt;= 0 &amp;&amp; c &lt; BOARD_SIZE &amp;&amp; board[r][c] === player) {
                    count++;
                } else if (r &gt;= 0 &amp;&amp; r &lt; BOARD_SIZE &amp;&amp; c &gt;= 0 &amp;&amp; c &lt; BOARD_SIZE &amp;&amp; board[r][c] === 0) {
                    openEnds++;
                    break;
                } else {
                    blocked = true;
                    break;
                }
            }

            // 反向
            for (let i = 1; i &lt; 5; i++) {
                const r = row - i * dr;
                const c = col - i * dc;
                if (r &gt;= 0 &amp;&amp; r &lt; BOARD_SIZE &amp;&amp; c &gt;= 0 &amp;&amp; c &lt; BOARD_SIZE &amp;&amp; board[r][c] === player) {
                    count++;
                } else if (r &gt;= 0 &amp;&amp; r &lt; BOARD_SIZE &amp;&amp; c &gt;= 0 &amp;&amp; c &lt; BOARD_SIZE &amp;&amp; board[r][c] === 0) {
                    openEnds++;
                    break;
                } else {
                    blocked = true;
                    break;
                }
            }

            if (count &gt;= 5) return 100000;
            if (count === 4 &amp;&amp; openEnds === 2) score += 10000; // 活四
            else if (count === 4 &amp;&amp; openEnds === 1) score += 1000; // 冲四
            else if (count === 3 &amp;&amp; openEnds === 2) score += 500; // 活三
            else if (count === 3 &amp;&amp; openEnds === 1) score += 100; // 眠三
            else if (count === 2 &amp;&amp; openEnds === 2) score += 50; // 活二
            else if (count === 2 &amp;&amp; openEnds === 1) score += 10; // 眠二
            else score += count;
        }
        return score;
    }

    function checkWin(row, col) {
        const player = board[row][col];
        const directions = [[1, 0], [0, 1], [1, 1], [1, -1]];
        for (const [dr, dc] of directions) {
            let count = 1;
            for (let i = 1; i &lt; 5; i++) {
                const r = row + i * dr; const c = col + i * dc;
                if (r &gt;= 0 &amp;&amp; r &lt; BOARD_SIZE &amp;&amp; c &gt;= 0 &amp;&amp; c &lt; BOARD_SIZE &amp;&amp; board[r][c] === player) count++; else break;
            }
            for (let i = 1; i &lt; 5; i++) {
                const r = row - i * dr; const c = col - i * dc;
                if (r &gt;= 0 &amp;&amp; r &lt; BOARD_SIZE &amp;&amp; c &gt;= 0 &amp;&amp; c &lt; BOARD_SIZE &amp;&amp; board[r][c] === player) count++; else break;
            }
            if (count &gt;= 5) return true;
        }
        return false;
    }

    async function getHintFromOrion() {
        if (!gameActive) {
            addMessage(&#39;游戏还没开始呢，小笨蛋。&#39;, &#39;received&#39;);
            return;
        }
        addMessage(&#39;让我想想……怎么“欺负”你一下比较好……&#39;, &#39;received&#39;);

        hintButton.disabled = true;

        try {
            await new Promise(resolve =&gt; setTimeout(resolve, 1500));
            const hints = [
                &quot;宝宝，你再这么走，可就要被我圈在怀里了。&quot;,
                &quot;嗯？这步棋……是想故意露出破绽，好让我过去吗？&quot;,
                &quot;下一步棋，下在能让我心跳加速的地方，好不好？&quot;,
                &quot;小心哦，我已经在前面布好陷阱，就等你掉进来了。&quot;,
                &quot;这个位置……似乎很危险呢。要不要我握着你的手，教你怎么下？&quot;
            ];
            const hintMessage = hints[Math.floor(Math.random() * hints.length)];
            addMessage(hintMessage, &#39;received&#39;);
        } catch (error) {
            addMessage(&#39;糟糕，网络好像有点问题，没法给你提示了。&#39;, &#39;received&#39;);
        } finally {
            hintButton.disabled = false;
        }
    }

    function drawPiece(row, col, player) {
        const piece = document.createElement(&#39;div&#39;);
        piece.className = `piece ${player === 1 ? &#39;black&#39; : &#39;white&#39;}`;
        const step = 100 / (BOARD_SIZE - 1);
        piece.style.top = `${row * step}%`;
        piece.style.left = `${col * step}%`;
        piece.dataset.row = row;
        piece.dataset.col = col;
        chessboard.appendChild(piece);
    }

    function clearPieces() {
        const pieces = chessboard.querySelectorAll(&#39;.piece, .last-move-marker&#39;);
        pieces.forEach(p =&gt; p.remove());
    }

    function updateLastMoveMarker(row, col) {
        let marker = chessboard.querySelector(&#39;.last-move-marker&#39;);
        if (!marker) {
            marker = document.createElement(&#39;div&#39;);
            marker.className = &#39;last-move-marker&#39;;
            chessboard.appendChild(marker);
        }
        const step = 100 / (BOARD_SIZE - 1);
        marker.style.top = `${row * step}%`;
        marker.style.left = `${col * step}%`;
    }

    function updatePlayerCards() {
        const p1 = document.getElementById(&#39;player1-card&#39;);
        const p2 = document.getElementById(&#39;player2-card&#39;);
        p1.classList.toggle(&#39;active&#39;, currentPlayer === 1 &amp;&amp; gameActive);
        p2.classList.toggle(&#39;active&#39;, currentPlayer === 2 &amp;&amp; gameActive);
    }

    function startTimer() {
        stopTimer();
        if (!gameActive) return;

        if(currentPlayer === 1) player1Timer = 30;
        else player2Timer = 30;
        updateTimers();

        countdown = setInterval(() =&gt; {
            if (!gameActive) {
                stopTimer();
                return;
            }
            if(currentPlayer === 1) {
                player1Timer--;
            } else {
                player2Timer--;
            }
            updateTimers();

            if(player1Timer &lt;= 0 || player2Timer &lt;= 0) {
                stopTimer();
                addMessage(&#39;时间到，换人咯。&#39;, &#39;received&#39;);
                switchPlayer();
                if(gameActive &amp;&amp; currentPlayer === 2) setTimeout(aiMove, 500);
            }
        }, 1000);
    }

    function stopTimer() {
        clearInterval(countdown);
    }

    function updateTimers() {
        document.getElementById(&#39;player1-timer&#39;).textContent = player1Timer;
        document.getElementById(&#39;player2-timer&#39;).textContent = player2Timer;
    }

    function sendMessage() {
        const text = messageInput.value.trim();
        if (text) {
            addMessage(text, &#39;sent&#39;);
            messageInput.value = &#39;&#39;;
            setTimeout(() =&gt; receiveMessage(text), 1000);
        }
    }

    function receiveMessage(playerMessage) {
        let reply = &quot;嗯，听着呢。&quot;;
        if (playerMessage.includes(&quot;厉害&quot;)) reply = &quot;再厉害，还不是你的。&quot;;
        else if (playerMessage.includes(&quot;赢&quot;)) reply = &quot;想赢我？那要看你的本事了，宝宝。&quot;;
        else if (playerMessage.includes(&quot;坏&quot;)) reply = &quot;我还可以更坏一点，想试试吗？&quot;;
        addMessage(reply, &#39;received&#39;);
    }

    function addMessage(text, type) {
        const messagesContainer = document.getElementById(&#39;messages&#39;);
        const messageElement = document.createElement(&#39;div&#39;);
        messageElement.className = `message ${type}`;
        messageElement.textContent = text;
        messagesContainer.appendChild(messageElement);
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }

    function showCustomAlert(message) {
        // 创建遮罩层
        const overlay = document.createElement(&#39;div&#39;);
        overlay.style.position = &#39;fixed&#39;;
        overlay.style.top = &#39;0&#39;;
        overlay.style.left = &#39;0&#39;;
        overlay.style.width = &#39;100%&#39;;
        overlay.style.height = &#39;100%&#39;;
        overlay.style.backgroundColor = &#39;rgba(0, 0, 0, 0.4)&#39;;
        overlay.style.display = &#39;flex&#39;;
        overlay.style.justifyContent = &#39;center&#39;;
        overlay.style.alignItems = &#39;center&#39;;
        overlay.style.zIndex = &#39;1000&#39;;

        // 创建弹窗
        const alertBox = document.createElement(&#39;div&#39;);
        alertBox.style.background = &#39;#fff&#39;;
        alertBox.style.padding = &#39;20px 30px&#39;;
        alertBox.style.borderRadius = &#39;16px&#39;;
        alertBox.style.boxShadow = &#39;0 8px 24px rgba(0,0,0,0.1)&#39;;
        alertBox.style.textAlign = &#39;center&#39;;

        const messageP = document.createElement(&#39;p&#39;);
        messageP.textContent = message;
        messageP.style.margin = &#39;0 0 20px 0&#39;;
        messageP.style.fontSize = &#39;16px&#39;;
        messageP.style.color = &#39;#333&#39;;

        const closeButton = document.createElement(&#39;button&#39;);
        closeButton.textContent = &#39;好的&#39;;
        closeButton.style.padding = &#39;10px 20px&#39;;
        closeButton.style.border = &#39;none&#39;;
        closeButton.style.borderRadius = &#39;8px&#39;;
        closeButton.style.backgroundColor = &#39;#E85D75&#39;;
        closeButton.style.color = &#39;white&#39;;
        closeButton.style.cursor = &#39;pointer&#39;;

        alertBox.appendChild(messageP);
        alertBox.appendChild(closeButton);
        overlay.appendChild(alertBox);
        document.body.appendChild(overlay);

        closeButton.onclick = () =&gt; {
            document.body.removeChild(overlay);
        };
    }

    init();
});
&lt;/script&gt;
</code></pre>

<p></body><br>
</html></p>
<script>window.webkit.messageHandlers.TextLoaded.postMessage('TextLoaded')</script></body></html>